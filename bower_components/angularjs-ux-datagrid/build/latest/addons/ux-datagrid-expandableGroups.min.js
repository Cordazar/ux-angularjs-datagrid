/*!
* ux-angularjs-datagrid v.1.4.4
* (c) 2015, Obogo
* https://github.com/obogo/ux-angularjs-datagrid
* License: MIT.
*/
(function (exports, global) {
if (typeof define === "function" && define.amd) {
  define(exports);
} else if (typeof module !== "undefined" && module.exports) {
  module.exports = exports;
} else {
  global.ux = exports;
}


exports.datagrid.events.COLLAPSE_ALL_GROUPS="datagrid:collapseAllGroups",exports.datagrid.events.EXPAND_ALL_GROUPS="datagrid:expandAllGroups",exports.datagrid.events.COLLAPSE_GROUP="datagrid:collapseGroup",exports.datagrid.events.EXPAND_GROUP="datagrid:expandGroup",exports.datagrid.events.TOGGLE_GROUP="datagrid:toggleGroup",exports.datagrid.events.EXPAND_GROUP_CHANGE="datagrid:expandGroupChange",angular.module("ux").factory("expandableGroups",function(){return["inst",function(a){function b(){i.length=0;for(var b,d=k(),e=0,f=-1,g=d&&d.length||0;g>e;)b=d[e],c(b)?(f+=1,i.push(b)):h[f]&&i.push(b),e+=1;d.length&&!i.length&&window.console&&window.console.warn&&console.warn("ExpandableGroups does not work with async loaded groups. It cannot keep the indexes in sync. Try this example http://jsfiddle.net/wesjones/3Wg79/"),a.dispatch(exports.datagrid.events.EXPAND_GROUP_CHANGE)}function c(b){return g.hideEmptyGroups?b[a.grouped]&&b[a.grouped].length:b[a.grouped]}function d(){b(),a.reset()}function e(a){for(var b=0,d=0;a>b;)c(i[b])&&(d+=1),b+=1;return d}var f=exports.logWrapper("expandableGroups",{},"orange",a.dispatch),g=a.expandableGroups||{},h={},i=[],j=a.setData,k=a.getData;return a.setData=function(c,d){return j.apply(a,arguments),b(),i},a.getData=function(){return i},f.expand=function(a,b){var c=b?a:e(a);h[c]=!0,d()},f.collapse=function(a,b){var c=b?a:e(a);delete h[c],d()},f.toggle=function(a){var b=e(a);h[b]?f.collapse(b,!0):f.expand(b,!0)},f.isExpanded=function(a){var b=e(a);return!!h[b]},f.getItems=function(){for(var b={expanded:[],collapsed:[]},d=0,e=i.length;e>d;d+=1){var g=a.getRowItem(d);c(g)&&b[f.isExpanded(d)?"expanded":"collapsed"].push(g)}return b},a.unwatchers.push(a.scope.$on(exports.datagrid.events.EXPAND_GROUP,function(a,b){f.expand(b)})),a.unwatchers.push(a.scope.$on(exports.datagrid.events.COLLAPSE_GROUP,function(a,b){f.collapse(b)})),a.unwatchers.push(a.scope.$on(exports.datagrid.events.TOGGLE_GROUP,function(a,b){f.toggle(e(b))})),a.unwatchers.push(a.scope.$on(exports.datagrid.events.COLLAPSE_ALL_GROUPS,function(a,b){h={},d()})),a.unwatchers.push(a.scope.$on(exports.datagrid.events.EXPAND_ALL_GROUPS,function(b,c){var e=a.getOriginalData();h={},exports.each(e,function(a,b){h[b]=!0}),d()})),a.expandableGroups=f,a}]});
//# sourceMappingURL=ux-datagrid-expandableGroups.min.js.map
}(this.ux = this.ux || {}, function() {return this;}()));
