/*!
* ux-angularjs-datagrid v.1.4.1
* (c) 2015, Obogo
* https://github.com/obogo/ux-angularjs-datagrid
* License: MIT.
*/
(function (exports, global) {
if (typeof define === "function" && define.amd) {
  define(exports);
} else if (typeof module !== "undefined" && module.exports) {
  module.exports = exports;
} else {
  global.ux = exports;
}


exports.datagrid.events.ON_MEMORY_OPTIMIZED="datagrid:onMemoryOptimized",angular.module("ux").factory("memoryOptimizer",function(){return["inst",function(a){function b(){a.options.creepRender=a.options.creepRender||{},a.options.creepLimit>.5*k.range&&(a.options.creepLimit=.5*k.range),a.creepRenderModel.disable()}function c(){d(),h=setTimeout(e,1e3)}function d(){clearTimeout(h)}function e(){for(var b,c,d=0,e=a.scopes.length,h={},i=0;e>d;)a.scopes[d]&&!g(d)&&(b=a.chunkModel.getRowIndexes(d),b.pop(),c=a.chunkModel.getItemByIndexes(b),h[c.getId()]||(h[c.getId()]=c,i+=1)),d+=1;i&&(exports.each(h,f),a.gc(),a.updateLinks())}function f(b){i.log("	decompile %s %s-%s",b.getId(),b.min,b.max);for(var c=b.min,d=b.max;d>=c;){if(a.scopes[c]){var e=a.scopes[c];a.activateScope(e),a.$$prevSibling=null,a.$$nextSibling=null,e.$destroy(),a.scopes[c]=void 0}c+=1}b.decompile(a.options.chunks.chunkReadyClass)}function g(b){var c=a.values.activeRange.min-k.range,d=a.values.activeRange.max+k.range;return c=0>c?0:c,b>=c&&d>b}a.options.memoryOptimizer=a.options.memoryOptimizer||{};var h,i=exports.logWrapper("memoryOptimizer",{},"redOrange",a.dispatch),j={range:2*a.options.creepLimit||200},k=a.options.memoryOptimizer=exports.extend(j,a.options.memoryOptimizer);return a.unwatchers.push(a.scope.$on(exports.datagrid.events.ON_BEFORE_DATA_CHANGE,d)),a.unwatchers.push(a.scope.$on(exports.datagrid.events.ON_AFTER_UPDATE_WATCHERS,c)),b(),a.memoryOptimizer=i,a}]});
//# sourceMappingURL=ux-datagrid-memoryOptimizer.min.js.map
}(this.ux = this.ux || {}, function() {return this;}()));
