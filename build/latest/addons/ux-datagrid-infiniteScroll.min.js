/*!
* ux-angularjs-datagrid v.1.2.5
* (c) 2015, Obogo
* https://github.com/obogo/ux-angularjs-datagrid
* License: MIT.
*/
(function (exports, global) {
if (typeof define === "function" && define.amd) {
  define(exports);
} else if (typeof module !== "undefined" && module.exports) {
  module.exports = exports;
} else {
  global.ux = exports;
}


angular.module("ux").factory("infiniteScroll",function(){return["inst","$filter",function(a,b){function c(){if(ux.selector&&a.element[0].contains(document.activeElement)){var b=a.getRowIndexFromElement(document.activeElement),c=a.getRowElm(b);e={rowIndex:b,selector:ux.selector.quickSelector(document.activeElement,c[0],a.options.gridFocusManager&&a.options.gridFocusManager.filterClasses||[])},e.selector=e.selector.replace(/:visible$/,"")}else e=null}function d(){return"function"==typeof a.options.infiniteScroll.limit?a.options.infiniteScroll.limit():a.options.infiniteScroll.limit||0}var e,f={},g=-1,h={_template:"loadingRow"},i=[];a.options.infiniteScroll=a.options.infiniteScroll||{},a.options.infiniteScroll.enable=void 0===a.options.infiniteScroll.enable?!0:a.options.infiniteScroll.enable,a.options.infiniteScroll.limit=void 0===a.options.infiniteScroll.limit?0:a.options.infiniteScroll.limit,f.onBeforeDataChange=function(e,g){if(a.options.infiniteScroll.enable&&g){var h=d();h&&(c(),e.newValue=b("limitTo")(g,h),e.newValue.length<h&&(e.preventDefault(),f.addExtraRow(e.newValue)))}},f.getLimit=d,f.addExtraRow=function(b){g=a.values.scroll,b.length&&b[b.length-1]!==h&&(a.element.addClass("loadingInfiniteRowData"),b.push(h))},f.afterRowsAdded=function(){var b,c;a.element.removeClass("loadingInfiniteRowData"),e&&(b=a.getRowElm(e.rowIndex),c=b[0].querySelector(e.selector),c.select&&c.select(),c&&c.focus())},f.enable=function(){i.push(a.scope.$on(ux.datagrid.events.ON_BEFORE_DATA_CHANGE,f.onBeforeDataChange)),i.push(a.scope.$on(ux.datagrid.events.ON_RENDER_AFTER_DATA_CHANGE,f.afterRowsAdded))},f.disable=function(){for(;i.length;)i.pop()()},f.destroy=function(){f.disable(),h=null,f=null},f.enable(),a.infiniteScroll=f}]});
//# sourceMappingURL=ux-datagrid-infiniteScroll.min.js.map
}(this.ux = this.ux || {}, function() {return this;}()));
