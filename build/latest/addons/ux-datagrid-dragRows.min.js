/*!
* ux-angularjs-datagrid v.1.4.1
* (c) 2015, Obogo
* https://github.com/obogo/ux-angularjs-datagrid
* License: MIT.
*/
(function (exports, global) {
if (typeof define === "function" && define.amd) {
  define(exports);
} else if (typeof module !== "undefined" && module.exports) {
  module.exports = exports;
} else {
  global.ux = exports;
}


exports.datagrid.events.DRAG_START="datagrid:dragStart",exports.datagrid.events.DRAG_STOP="datagrid:dragStop",exports.datagrid.events.DRAG_DROP="datagrid:dragDrop",exports.datagrid.options.dragRows={dragClass:"",templateId:""},angular.module("ux").factory("dragRows",function(){return["inst",function(a){function b(){n()}function c(){return!!q}function d(a){a.style.webkitUserSelect="none",a.style.khtmlUserSelect="none",a.style.mozUserSelect="-moz-none",a.style.mozUserSelect="none",a.style.msUserSelect="none",a.style.userSelect="none"}function e(a){a.style.webkitUserSelect="",a.style.khtmlUserSelect="",a.style.mozUserSelect="",a.style.mozUserSelect="",a.style.msUserSelect="",a.style.userSelect=""}function f(b){return b.pageY-u+a.element[0].scrollTop-.5*q.height}function g(a){var b=l(a);s.style.top=b.y+"px",q.targetIndex=b.index}function h(){s=document.createElement("div"),s.style.top="0px",s.style.left="0px",s.style.position="absolute",s.style.webkitTransform="translateY(-50%);",s.style.mozTransform="translateY(-50%);",s.style.msTransform="translateY(-50%);",s.style.transform="translateY(-50%);",s.classList.add("ux-datagrid-dragRow-indicator")}function i(b,c){u=a.element[0].offsetTop,d(a.element[0]);var e=a.getRowElm(c),g=document.createElement("div");g.innerHTML=e[0].outerHTML,r=g.children[0],h(),g.innerHTML="",q={index:c,el:e,data:a.getRowItem(c),height:a.getRowHeight(c),cloneEl:r},r.style.position="absolute",r.style.top=f(b)+"px",r.style.left="0px",r.classList.add("ux-datagrid-dragRow-dragging"),a.element.append(s),a.element.append(r),a.dispatch(exports.datagrid.events.DRAG_START,q),a.element.on("mousemove",j),a.element.on("mouseup",m)}function j(a){var b;(a.pageY>w+v||a.pageY<w-v)&&(b=f(a),q.cloneEl.style.top=f(a)+"px",q.cloneEl.style.left="0px",w=a.pageY,g(b))}function k(){var b;q&&(a.element.off("mousemove",j),a.element.off("mouseup",m),a.dispatch(exports.datagrid.events.DRAG_STOP,q),q=void 0,e(a.element[0]),b=a.scope.$on(exports.datagrid.events.ON_AFTER_RENDER,function(){b(),a.element[0].removeChild(r),a.element[0].removeChild(s),r=null,s=null}))}function l(b){var c=0,d=a.rowsLength,e=0,f=0;for(c;d>c;c+=1)if(f=a.getRowHeight(c),e+=f,e-.5*f>b)return{index:c+1,y:e};return-1}function m(b){a.dispatch(exports.datagrid.events.DRAG_DROP,q),a.moveItem(q.index,q.targetIndex),k()}function n(){}function o(){}function p(){o()}var q,r,s,t=exports.logWrapper("dragRows",{},"#00CCFF",a.dispatch),u=0,v=4,w=0;return t.isDragging=c,t.start=i,t.stop=k,t.destroy=p,a.unwatchers.push(a.scope.$on(exports.datagrid.events.ON_READY,b)),a.unwatchers.push(a.scope.$on(exports.datagrid.events.ON_BEFORE_DATA_CHANGE,function(a){k()})),a.dragRows=t,a}]});
//# sourceMappingURL=ux-datagrid-dragRows.min.js.map
}(this.ux = this.ux || {}, function() {return this;}()));
